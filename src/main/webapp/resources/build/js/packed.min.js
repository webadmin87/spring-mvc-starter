!function(t){t.module("springMvcStarter",["ngResource","ui.router","ui.bootstrap","ui.grid","ui.grid.pagination"]).constant("urlMapping",{}).config(["$resourceProvider",function(t){t.defaults.stripTrailingSlashes=!1}]).config(["$provide","$httpProvider",function(t,e){e.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",e.defaults.headers.common.Accept="*",e.defaults.cache=!0,t.factory("AppHttpInterceptor",["$q","$location","authStorage",function(t,e,r){return{request:function(t){var e=r.getUser();return e&&(t.headers["X-AUTH-TOKEN"]=e.token),t},responseError:function(n){return 401==n.status?(r.reset(),e.path("/login")):404==n.status&&e.path("/not-found"),t.reject(n)}}}]),e.interceptors.push("AppHttpInterceptor")}]).config(["$sceProvider",function(t){t.enabled(!1)}]).config(["$stateProvider","$urlRouterProvider",function(t,e){e.otherwise("/"),t.state("main",{url:"/",templateUrl:"resources/views/index.html",controller:"MainCtrl"}),t.state("login",{url:"/login",templateUrl:"resources/views/login.html",controller:"LoginCtrl"}),t.state("notFound",{url:"/not-found",templateUrl:"resources/views/not-found.html",controller:"NotFoundCtrl"}),t.state("users",{url:"/users",templateUrl:"resources/views/users.html",controller:"UserListCtrl"})}])}(angular),function(t){function e(){var e="AUTH_STORAGE";this.setUser=function(r){localStorage.setItem(e,t.toJson(r))},this.getUser=function(){return t.fromJson(localStorage.getItem(e))},this.reset=function(){localStorage.removeItem(e)}}t.module("springMvcStarter").service("authStorage",[e])}(angular),function(t,e,r){function n(t,r,n,o,i){this.login=function(o){function i(t,e,r){200==e?(n.setUser(t),a.resolve()):a.reject()}function u(){a.reject()}function s(t,r){return e.param(t)}var a=r.defer();return t.post("/login",o,{transformRequest:s,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(i).error(u),a.promise},this.logout=function(){n.reset(),i.get("$http").removeAll()},this.getUser=function(){return n.getUser()},this.isAuth=function(){return null!=n.getUser()};var u=null;this.getResource=function(){return null==u&&(u=o("/admin/user/:id",{id:"@id"},{page:{method:"GET",isArray:!1}})),u}}t.module("springMvcStarter").service("userService",["$http","$q","authStorage","$resource","$cacheFactory",n])}(angular,jQuery,_),function(t,e){function r(t,e,r){e.logout(),t.error,t.model={},t.login=function(n){var o=e.login(n);o.then(function(){r.go("main")},function(){t.error=!0})}}t.module("springMvcStarter").controller("LoginCtrl",["$scope","userService","$state",r])}(angular,_),function(t,e){function r(t){}t.module("springMvcStarter").controller("MainCtrl",["$scope",r])}(angular,_),function(t,e){function r(t){}t.module("springMvcStarter").controller("NotFoundCtrl",["$scope",r])}(angular,_),function(t,e){function r(t,e,r){t.getUser=function(){return e.getUser()},t.logout=function(){e.logout(),r.go("main")},t.isAuth=function(){return e.isAuth()}}t.module("springMvcStarter").controller("UserInfoCtrl",["$scope","userService","$state",r])}(angular,_),function(t,e){function r(t,e){function r(){var t={};for(var e in u)u[e]&&(t[e]=u[e]);return t}function n(){t.page=o.page(r(),function(e){t.gridOptions.data=e.content,t.gridOptions.totalItems=e.totalElements})}var o=e.getResource(),i=20,u={page:1,pageSize:i,sortDirection:null,sortField:null};t.gridOptions={paginationPageSizes:[i,40,80],useExternalPagination:!0,paginationPageSize:i,useExternalSorting:!0,columnDefs:[{name:"id"},{name:"username"},{name:"email"}]},t.gridOptions.onRegisterApi=function(e){t.gridApi=e,t.gridApi.core.on.sortChanged(t,function(t,e){0==e.length?(u.sortField=null,u.sortDirection=null):(u.sortField=e[0].field,u.sortDirection=e[0].sort.direction.toUpperCase()),n()}),t.gridApi.pagination.on.paginationChanged(t,function(t,e){u.page=t,u.pageSize=e,n()})},n()}t.module("springMvcStarter").controller("UserListCtrl",["$scope","userService",r])}(angular,_);