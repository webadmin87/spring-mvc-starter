!function(t){t.module("springMvcStarter",["ui.router","ui.bootstrap"]).constant("urlMapping",{}).config(["$provide","$httpProvider",function(t,e){e.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",e.defaults.headers.common.Accept="*",e.defaults.cache=!0,t.factory("AppHttpInterceptor",["$q","$location","authStorage",function(t,e,r){return{request:function(t){var e=r.getUser();return e&&(t.headers["X-AUTH-TOKEN"]=e.token),t},responseError:function(n){return 401==n.status?(r.reset(),e.path("/login")):404==n.status&&e.path("/not-found"),t.reject(n)}}}]),e.interceptors.push("AppHttpInterceptor")}]).config(["$sceProvider",function(t){t.enabled(!1)}]).config(["$stateProvider","$urlRouterProvider",function(t,e){e.otherwise("/"),t.state("main",{url:"",templateUrl:"resources/views/index.html",controller:"MainCtrl"}),t.state("login",{url:"/login",templateUrl:"resources/views/login.html",controller:"LoginCtrl"}),t.state("notFound",{url:"/not-found",templateUrl:"resources/views/not-found.html",controller:"NotFoundCtrl"}),t.state("users",{url:"/users",templateUrl:"resources/views/users.html",controller:"UserListCtrl"})}])}(angular),function(t,e,r){function n(){var e="AUTH_STORAGE";this.setUser=function(r){localStorage.setItem(e,t.toJson(r))},this.getUser=function(){return t.fromJson(localStorage.getItem(e))},this.reset=function(){localStorage.removeItem(e)}}t.module("springMvcStarter").service("authStorage",[n])}(angular,jQuery,_),function(t,e,r){function n(t,r,n){this.login=function(o){function u(t,e,r){200==e?(n.setUser(t),c.resolve()):c.reject()}function s(){c.reject()}function i(t,r){return e.param(t)}var c=r.defer();return t.post("/login",o,{transformRequest:i,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(u).error(s),c.promise},this.logout=function(){n.reset()},this.getUser=function(){return n.getUser()},this.isAuth=function(){return null!=n.getUser()},this.getAll=function(){return t.get("/admin/users/")}}t.module("springMvcStarter").service("userService",["$http","$q","authStorage",n])}(angular,jQuery,_),function(t,e){function r(t,e,r){e.logout(),t.error,t.model={},t.login=function(n){var o=e.login(n);o.then(function(){r.go("main")},function(){t.error=!0})}}t.module("springMvcStarter").controller("LoginCtrl",["$scope","userService","$state",r])}(angular,_),function(t,e){function r(t){}t.module("springMvcStarter").controller("MainCtrl",["$scope",r])}(angular,_),function(t,e){function r(t){}t.module("springMvcStarter").controller("NotFoundCtrl",["$scope",r])}(angular,_),function(t,e){function r(t,e){e.getAll().success(function(e){t.models=e})}t.module("springMvcStarter").controller("UserListCtrl",["$scope","userService",r])}(angular,_);